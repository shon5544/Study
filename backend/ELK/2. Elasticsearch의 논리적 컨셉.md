
## 문서
어떤 엔티티를 나타내는 데이터베이스에서 한 줄의 행과도 같은 역할이며 이는 검색의 대상임.
Elasticsearch는 구조화된 데이터라면 다 저장 가능.

모든 문서는 고유 ID를 가질 수 있다.
직접 ID를 할당해줄 수도 있고 Elasticsearch에게 전적으로 맡길 수도 있다.

## 색인
데이터베이스의 테이블과 같은 개념

색인은 각 문서 내의 데이터 유형을 정의하는 체계가 있고 하나의 Elasticsearch와 색인에는 한 가지 유형의 문서만 사용할 수 있음

색인은 역색인(Inverted index)이라 불리며 대부분의 검색엔진이 작동하는 원리이다.

## 관계형 DB로의 비유
클러스터 => DB
색인(인덱스) => 테이블
문서(Documents) => 행

비유는 할 수 있지만 전통적인 db와는 작동방식이 상당히 다르다.

## 역색인
색인에 텍스트 데이터가 포함된 여러 문서가 있다고 가정해보자.
>문서1: "wow, that's awesome!"
>문서2: "wow, you good man?"

역색인은 이 문서를 그대로 저장하지 않고 완전히 뒤바꾼다.
예를 들면 각 문서를 모두 단어별로 해체하여 소문자로 변환한 다음, 각 검색어를 해당 검색어가 포함된 문서에 매핑한다.

예를 보면, "wow"라는 단어는 두 문서에 공통으로 나타난다.

역색인은 "wow"가 문서 1, 2에 포함되어있음을 나타낼 것이다.

wow: 문서1, 문서2
that: 문서1
awesome: 문서1
...
이런식으로


물론 현실은 더욱 복잡하다. 문서 내의 위치까지 저장해야하기 때문이다.

그렇지만 이게 거시적 관점에서의 기초 개념이다.



## 어떻게 관련성의 개념을 다룰까?
"the"라는 단어를 예로 들어보자.
"the"는 매우 흔한 단어이다. 여러 문서에 엄청나게 산재되어있을 텐데, "the"를 검색할 때 어떻게 의미있는 문서만을 가려낼 수 있을까?

여기서 TF-IDF(Term Frequency * Inverse Document Frequency)라는 개념이 등장한다.

## TF-IDF
### TF(단어 빈도)
TF는 지정된 검색어가 문서 내에서 나타나는 빈도를 의미한다.

만약 어떤 문서에서 "space"라는 단어가 많이 나타나면 단어 빈도가 높아진다.
"the"또한 마찬가지일 것이다.

따라서 TF란, 문서 내에서의 특정 단어의 빈도이다.

이제부터 흥미로워지는데, "space"라는 단어를 색인 내에서 많이 사용하진 않을 테니까 문서빈도는 낮을 것이다. 하지만 "the"는 자주 등장하므로 문서빈도가 굉장히 높을 것이다.

### IDF
여기서 `단어빈도를 문서빈도의 값으로 나누면` 이는 `역문서 빈도(IDF)`의 값과 같고 관련성을 수학적으로 구현한 것이다. 따라서 그 단어가 얼마나 문서내에서 특별한지 알 수 있는 것이다.

### 관련성
관련성은 해당 단어가 문서 내에서 얼마나 자주 사용되는지 뿐 아니라 전체 색인에서 얼마나 자주 사용되는지와 비교해 보인다.

예를 들면 "space"라는 단어는 우주에 관한 기사에서 높은 관련성을 가질 것이고 "the"는 특정성을 갖지 못할 것이기 때문에 높은 관련성을 나타내지 못할 것이다.

이러한 관련성은 TF-IDF의 개념에 기초하고 있다.