## 도메인이란?
소프트웨어적으로 표현하고자 하는 어떤 대상을 의미한다.
예시로 온라인 서점을 한번 보자. 온라인으로 책을 판매하는 것에는 상품 조회, 구매, 결제, 배송 추적 등의 기능을 제공해야하는데, 그렇기에 온라인 서점은 소프트웨어로 해결하고자 하는 문제 영역이 되므로 도메인에 해당하는 것이다.

## 도메인 모델
![[Pasted image 20240129190631.png]]
기본적으로 도메인은 특정 도메인들을 개념적으로 표현한 것이다. 그렇기 때문에 조금 다양한 그림으로써 표현될 수 있다. 

위의 그림은 도메인 모델을 객체 모델로서 표현한 그림이고, 아래의 그림은 다이어그램으로 표현한 도메인 모델이다.

![[Pasted image 20240129190943.png]]

이처럼 도메인 모델은 이해에만 도움이 되면 모든 다 된다. 심지어 계산이 많이 필요한 도메인의 경우 수학 공식조차도 도메인 모델이 될 수 있다.

## 도메인 모델 패턴

일반적인 애플리케이션 아키텍처는 네 개의 영역으로 구성된다.

- Presentation 계층 
	- 사용자의 요청을 처리한다. 사용자에게 정보를 보여준다. 사용자는 실제 사람이 아니라 어떠한 외부 시스템일 수도 있다.
- Application 계층 
	- 사용자가 요청한 기능 실행. 업무 로직을 직접 구현하지 않으며 도메인 계층을 조합해서 기능을 실행. 때문에 Application 계층의 컴포넌트는 Facade 패턴을 띄는 경향이 있음.
- Domain 계층
	- 시스템이 제공할 도메인 규칙을 구현하는 곳.
- infrastructure 계층
	- 데이터베이스나 메시징 시스템 같은 외부 시스템과의 연동을 처리한다.

앞서 살펴본 도메인 모델이 도메인 자체를 이해하는데 필요한 개념 모델을 의미한다면, 지금부터 볼 도메인 모델은 아키텍처 상의 도메인 계층을 객체 지향 기법으로 구현하는 패턴을 말한다.

도메인 계층은 도메인의 핵심 규칙을 구현한다.

Order와 OrderState라는 도메인이 있다고 가정하자.
대충 배송지를 변경할 수 있는 로직을 짜야하는데 이에 대한 구현을 Application Service가 아니라 Order, 혹은 OrderState에 구현을 해놓았다. 중요한 점은 주문 관련된 이런 중요한 업무 규칙을 주문 도메인 모델인 Order 혹은 OrderState에서 구현한다는 점이다.

핵심 규칙을 구현한 코드는 도메인 모델에만 위치하기 때문에 규칙이 바뀌거나 규칙을 확장해야할 때 다른 코드에 영향을 덜 주고 변경 내역을 모델에 반영할 수 있게 된다.

> 도메인 모델이라는 용어는 도메인 자체를 표현하는 개념적 모델을 의미하지만 도메인 계층을 구현할 때 사용하는 객체 모델을 언급할 때도 도메인 모델이라는 용어를 사용한다.

> 💡 NOTE. 개념 모델과 구현 모델
> 개념 모델은 순수하게 문제를 분석한 결과물이다. 따라서 개념 모델은 데이터베이스, 트랜잭션 처리, 성능, 구현 기술 같은 걸 고려하지 않기 때문에 실제 코드를 작성할 때 개념 모델을 있는 그대로 사용할 순 없다. 그래서 개념 모델을 구현 가능한 형태의 모델로 전환하는 과정을 거치게 된다.
> 
> 개념 모델을 만들 때 처음부터 완벽하게 도메인을 표현하는 모델을 만드려고 시도할 순 있다. 근데 이건 실제로 불가능하다. 소프트웨어를 개발하는 동안 개발자와 관계자들은 해당 도메인을 더 잘 이해하게 된다. 플젝 초기에 이해한 도메인 지식이 시간이 지나 완전히 다른 의미로 해석되는 경우도 있다. 때문에 결국 도메인에 대한 새로운 지식이 쌓이면서 모델을 보완하거나 변경하는 일이 발생한다.
> 
> 따라서 처음부터 완벽한 개념 모델을 만들기보다는 전반적인 개요를 알 수 있는 수준으로 개념 모델을 작성해야 한다. 프로젝트 초기엔 개요 수준의 개념 모델로 도메인에 대한 전체 윤곽을 이해하는 것에 집중하고 구현하는 과정에서 개념 모델을 구현 모델로 점진적으로 발전시켜 나가야 한다.

도메인 모델이란 단순 필드의 집합이 아니다. 특정 도메인에 대한 요구사항과 이를 달성하기 위한 일종의