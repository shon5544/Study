#ethernet 
### 개요
* [[#MAC이란?]]
* [[#브로드 캐스트 충돌]]
* [[#충돌 피하기]]
* [[#스위치]]
* [[#MAC 주소]]
___
### 출처
* https://github.com/gdsc-ssu/CSocrates/tree/main/Network/Link%20Layer
___
### MAC이란?

MAC은 Multi Access Control을 말하며 데이터 링크 계층을 구성하는 2개의 프로토콜 중 하나이다. <span class="red red-bg">맥은 다중 접속으로 인해 발생하는 이슈들을 관리하며 주로 패킷의 충돌을 감지, 방지하는 작업을 진행한다. </span>
 
**MAC의 탄생 배경에는 네트워크 공유라는 기본 원리가 있다.** 옛날 옛적 LAN이라는 개념이 없던 시절의 네트워크는 1:1 연결만 성립 했었다. 따라서 서로가 통신을 하고 싶다면 별개의 케이블을 설치 해야만 했다. (Fully Connected) 이 경우 적은 인원은 감당 가능하지만, 사용자 수가 많아 질 경우 설치해야 할 케이블 수가 기하급수 적으로 증가하는 문제가 발생했다.

![[Pasted image 20231221150813.png]]

이에 따라 **하나의 케이블을 여럿이서 공유하자는 의견이 나오게 됐고 여럿이서 하나의 자원을 평화롭게 사용하기 위한 규칙이 필요해졌다. 이때 등장한 것이 MAC이다.**
___
### 브로드 캐스트 충돌

공유 네트워크를 구축하는 가장 기본적인 형태는 허브를 사용하는 것이다. 허브는 마치 케이블들을 전부 하나의 박스에 집어 넣은 것처럼 동작해 허브만 통하면 네트워크 구성원 누구와도 통신을 가능케 해준다. **허브를 사용하면 케이블 개설 비용을 줄일 수 있지만, 허브는 수신한 데이털르 모든 구성원에게 재전송하므로 충돌이 발생할 수 있다.**

![[Pasted image 20231221151511.png]]
 
 **허브는 브로드캐스트 방식으로 동작하기 때문에 데이터 충돌이 발생**한다. 허브는 수신한 신호에 대해 어떠한 제어도 진행하지 않고 **수신한 신호를 모든 네트워크 구성원에게 일방적으로 전파**한다. <span class="red red-bg">이러한 현상을 플루딩이라고 하는데 이로 인해 동시에 여러 컴퓨터가 송신을 하면 신호 충돌이 발생하며 데이터가 유실된다.</span>
 ___
### 충돌 피하기

네트워크를 공유하면 충돌이 발생할 수 있기 때문에 MAC은 다양한 방법으로 충돌을 회피할 수 있게 하는데, 다음의 방법들이 존재한다.

- **CSMA/CD**
    **송신전 신호를 감지해 누군가 송신 중이면 송신하지 않고 아무도 송신하지 않으면 송신을 진행한다. 또한 만약 충돌이 발생하면 n초 대기 후 다시 재수행 한다**. 이 방법을 활용하면 충돌 문제를 모두 해결할 수 있을 것 같지만, 다음과 같은 상황이 존재할 수 있다. 만약 두 기기가 동시에 채널이 빈것을 확인하고 송신을 재개하면 충돌이 발생할 수 있다

* **CSMA/CA**
	무선 환경에서 사용하는 방법으로 **충돌 자체를 회피하는 방식**이다. 무선의 경우 재전송에 대한 오버헤드가 크기 때문에 최대한 충돌 자체가 발생하지 않는 상황을 설정하고 통신을 진행한다. 프레임 간의 통신 간격을 넓게 설정하거나 우선 순위를 부여하는 방식 등을 활용해 이를 구현한다.

___
### 스위치

**네트워크 스위치는 허브의 발전형으로 훨씬 향상된 네트워크 속도를 제공**한다. 라우터와 달리 스위치는 주로 네트워크와 네트워크 간의 연결이 아닌 장치와 장치를 연결해 네트워크를 구성하는 기능을 한다.

==**스위치의 주 기능은 스위칭으로  전달된 데이터의 목적지를 파악하고 해당 목적지가 위치한 포트로 데이터를 전송하는 행위**==를 말한다. 이를 통해 스위치는 허브의 가장 큰 단점인 충돌을 해결하고 속도를 향상 시켰다.

![[Pasted image 20231221161650.png]]

- **스위치의 사용이유**
    스위치를 사용하는 이유는 명확하다. **타이밍을 엇갈리게 하는 방법으로는 충돌을 완전히 방지할 수 없기 때문에 데이터가 지나다니는 길을 분리하기 위해 스위치를 활용**한다. 이때 **스위치는 데이터가 지나다니는 길을 구분하기 위한 수단으로 MAC 주소**를 활용한다.
    
    **스위치는 데이터가 송신되면 특정 포트에 연결된 송신자의 MAC 주소를 자신의 테이블에 기록**해둔다. 이후 학습한 테이블을 활용해 다음 통신 때 활용한다. 따라서 <b><u>데이터를 전체에 송신하지 않고 테이블의 MAC 주소를 확인한 뒤 수신 대상이 있는 특정 포트로만 전송하기 때문에 충돌을 방지 할 수 있다.</u></b>

![[Pasted image 20231221162024.png]]

> [!info]
> **스위치를 통해 충돌을 방지할 수 있고 이때 식별을 위해 사용하는 것이 MAC 주소이다.**

___
### MAC 주소

MAC 계층에서 사용하는 주소로 8비트의 숫자 6개 총 48비트의 숫자로 구성된다. <span class="red red-bg">MAC 주소는 랜카드에 부여되는 번호로이를 통해 스위치는 개별 기기를 구분할 수 있다.</span> MAC은 기기당 한개씩 존재할듯 하지만, 랜 카드당 존재하기 때문에 유,무선을 전부 지원하는 장치라면 MAC 주소가 2개 존재한다.

![[Pasted image 20231221162631.png]]