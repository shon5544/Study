
## SUT
```java
@DisplayName("유저 북마크 테스트")
@Test
void test_user_bookmark() {
	// given
	User sut = User.builder()
			.bookmark(new ArrayList<>())
			.build();

	// when
	sut.toggleBookmark("my-link");

	//then
	boolean result = sut.hasBookmark("my-link");
	assertThat(result).isTrue();
}
```
- 테스트 하려고 하는 대상.
- 여기선 user가 SUT다.

## BDD
- 행동 기반 개발
- 유저 스토리를 강조하는 기법
- given-when-then이 BDD에 속해있다.

## 상태 기반 테스트
```
```
- 내가 평소에 항상하는 테스트.
- 어떤 함수에 데이터를 넣고, 그 함수의 결과값으로 나온 데이터를 비교하여 테스트 여부를 결정하는 테스트.

## 행동 기반 테스트(상호 작용 테스트)
> `verify(sut).markModified();`
- 위와 같은 방식이 행동 기반 테스트이다.
- 어떤 sut의 함수가 호출되었는지 확인하는 테스트이다.
- 이건 별로 좋지 않다. 왜? sut의 내부 구현을 뜯어보는 테스트이기 때문.
- 캡슐화가 깨지는 것이다 이건.
- 그래서 지양해야하는 기법.

## 테스트 픽스처
```java
private User sut;

@BeforeEach
void setup() {
	sut = User.builder()
	...
}

@DisplayName("test")
@Test
void test1() {
	// given
	...
	// when
	...
	// then
	...
}
```
- 테스트에 필요한 사전 자원이라고 생각하면 된다.
- 이 경우 User sut가 테스트 픽스처가 된다.

## 비욘세 규칙
> 네가 나를 좋아했다면, 프로포즈를 했어야지
> 상태를 유지하고 싶었다면, 테스트를 만들었어야지
- 대중적인 규칙은 아님
- 유지하고 싶은 정책이나 규칙이 있으면 알아서 테스트를 만들었어야 한다는 얘기다.
- 뭔 얘기인지는 아래에서 다룬다.

## 테스트는 일종의 정책 / 계약이다.
- 예를 들어보자. "어 이거 수정해도 되겠네, 이 부분 수정해도 되나요?"라는 질문이 들어왔다 해보자.
- 한번쯤은 OK, 편하게 알려줄 수 있지. 근데 다른 팀원이 들어오고, 같은 질문을 물어보고.. 이게 100번 반복된다고 해보자.
- 머리 터진다 진짜.
- 혹은 내가 휴가를 가서 답장을 할 수 없는 상황이라고 해보자.
- 팀원이 내 코드와 사이드 이펙트가 생기는 코드를 PR 냈고 문맥을 파악하지 못한 다른 팀원이 이를 머지했다고 하자.
- 큰일 나는거다. 그냥..
- 테스트 코드가 잘 있다면 작업 완료하고 테스트 코드 실행시켜보면 되는 거다. 되는지 안 되는지 테스트 코드는 정답을 알고있다.
- 팀원들은 내가 쓴 테스트 코드를 기반으로 어떻게 할지 질문없이 갈 수 있다.
- 따라서 테스트 코드는 내 코드에 대한 나와 팀원들간의 일종의 정책 혹은 계약이다.

## Testabllity
- 소프트웨어가 테스트 가능한 구조인지에 대한 것이다.
- 나중에 따로 문서를 파서 기록할 예정

## 테스트 더블
- 인증 메일을 날리는 코드를 테스트한다고 하자.
- 테스트 한번 할 때마다 유저한테 진짜 메일을 날려야할까?
- MailSender를 진짜배기가 아니라 짝퉁을 넣어서 테스트를 보는 것. 이것이 바로 테스트 더블이다.
- 가짜 대역을 넣어주는 것이다.
- 이건 가짜 대역이 어느정도의 역할이 있느냐에 따라 다양한 분류로 나뉘어진다.