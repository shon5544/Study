
## 코루틴의 예외 전파
코루틴에 예외가 터지면 취소되고 해당 예외가 부모 코루틴으로 전파된다.

그러면 부모 코루틴도 터지겠지? 예외가 전파됐으니까. 이런식으로 연쇄 취소 되어 루트 코루틴까지 취소될 수 있다.

그러면 곤란할 것이다. 많은 상황에서 특정 지점에 예외 전파를 제한하고 싶을 것이다. 

당연히 이런 제한도 가능하다! 한번 알아보자.

## 예외 전파 제한
### Job을 이용한 전파 제한
- 구조화된 코루틴이 있을 때 예외 전파를 제한하고 싶은 지점에서 Job을 변경해주면 된다.
- 구조화를 깨는 방식으로 예외 전파를 제한하는 것이다.
![[Pasted image 20240823204151.png]]

#### 한계
- 구조화를 깨는 방식이기 때문에 이는 취소 전파도 제한하게 만든다.
- 그러면 굉장히 관리하기 힘들어질 것이다.
- 그러기에 이런 방식은 별로 좋지 않다.

### SupervisorJob 객체를 사용한 예외 전파 제한
```kotlin
public fun SupervisorJob(parent: Job? = null) : CompletableJob = SupervisorJobImp1 (parent)
```
- SupervisorJob은 예외를 전파받지 않는 특별한 Job이다.
- 예외를 전파받지는 않지만 예외 정보는 받으니 참고.
- 당연히 Job이 할 수 있는 대부분의 것들을 다 할수가 있다. 코루틴 스코프에 넣어서 함께 사용한다던지..
- 말단 코루틴들에게 붙여주면 잘 될 것이다.
- 만드는 방법은 Job만들때랑 비슷함. 그냥 `val job = SupervisorJob()`  이런식으로 해주면 됨. 그걸로 launch 시 넣어주면 된다.
- parent 인자에 부모 job을 적절히 잘 넣으면 구조화를 깨지않고 쓸 수 있다.

#### 흔히 할 수 있는 실수


